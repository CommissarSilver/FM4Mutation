{
    "bug_id": 39,
    "bug_type": "SF",
    "buggy_lines": "",
    "code": "    public Object deserialize(JsonParser p, DeserializationContext ctxt) throws IOException\n    {\n        // 29-Jan-2016, tatu: Simple skipping for all other tokens, but FIELD_NAME bit\n        //    special unfortunately\n            p.skipChildren();\n        return null;\n    }",
    "fixed_code": "    public Object deserialize(JsonParser p, DeserializationContext ctxt) throws IOException\n    {\n        // 29-Jan-2016, tatu: Simple skipping for all other tokens, but FIELD_NAME bit\n        //    special unfortunately\n        if (p.hasToken(JsonToken.FIELD_NAME)) {\n            while (true) {\n                JsonToken t = p.nextToken();\n                if ((t == null) || (t == JsonToken.END_OBJECT)) {\n                    break;\n                }\n                p.skipChildren();\n            }\n        } else {\n            p.skipChildren();\n        }\n        return null;\n    }",
    "fixed_lines": "        if (p.hasToken(JsonToken.FIELD_NAME)) {\n            while (true) {\n                JsonToken t = p.nextToken();\n                if ((t == null) || (t == JsonToken.END_OBJECT)) {\n                    break;\n                }\n                p.skipChildren();\n            }\n        } else {\n        }",
    "masked_code": "    public Object deserialize(JsonParser p, DeserializationContext ctxt) throws IOException\n    {\n        // 29-Jan-2016, tatu: Simple skipping for all other tokens, but FIELD_NAME bit\n        //    special unfortunately\n            p.skipChildren();\n>>> [ INFILL ] <<<\n        return null;\n    }",
    "project": "JacksonDatabind",
    "test_error_message": "com.fasterxml.jackson.databind.exc.UnrecognizedPropertyException: Unrecognized field \"location\" (class com.fasterxml.jackson.databind.jsontype.TestPolymorphicWithDefaultImpl$CallRecord), not marked as ignorable (4 known properties: \"version\", \"item\", \"item2\", \"application\"])",
    "test_framework": "defects4j",
    "test_line": "",
    "test_name": "testUnknownTypeIDRecovery",
    "test_suite": "com.fasterxml.jackson.databind.jsontype.TestPolymorphicWithDefaultImpl",
    "time_buggy": "2016-01-28 22:09:32 -0800",
    "time_fixed": "2016-01-29 22:29:46 -0800",
    "bug_description": "Bug ID: 39\nProject: JacksonDatabind\nBug Type: Serialization Failure (SF)\n\nBug Description:\n\nIn the project 'JacksonDatabind', a bug has been identified in the deserialization method, denoted as Serialization Failure (SF). The function is experiencing difficulty parsing the \"location\" field within the JSON object \"com.fasterxml.jackson.databind.jsontype.TestPolymorphicWithDefaultImpl$CallRecord.\" This unrecognized property seems to be causing the error, as suggested by the test error message: \"com.fasterxml.jackson.databind.exc.UnrecognizedPropertyException: Unrecognized field \"location.\"\n\nStep-by-step description:\n\n1. The deserialization method is being called to deserialize a JSON object into Java classes. \n\n2. The problematic code segment is trying to pass the process of deserialize.\n\n3. However, in the case when the JSON object contains a FIELD_NAME token (i.e., a field identified by its name, such as \"location\"), the original code doesn't check for this token and attempts to skip the children of this field. \n\n4. This triggers the UnrecognizedPropertyException, as the \"location\" field is not marked as ignorable and the program is unprepared to handle this field, thus leading to the deserialization process's failure.\n\n5. The fixed code checks if the JSON object has a FIELD_NAME token. If true, the code enters a while loop, which continues until it finds a null token or the end of the object's field list (END_OBJECT).\n\n6. If the token is not null and not END_OBJECT, it attempts to skip the children of this token, which prevents the UnrecognizedPropertyException.\n\nTo generate artificial Java bugs similar to this, one might create a scenario where the deserialization method is trying to deserialize a JSON object with a FIELD_NAME token, but the code does not handle these tokens correctly, leading to an UnrecognizedPropertyException. It can be especially interesting if the FIELD_NAME field is not marked as ignorable in the subject class."
}