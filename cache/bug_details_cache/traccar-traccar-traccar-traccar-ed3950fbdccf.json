{
    "bug_id": "traccar-traccar-ed3950fbdccf",
    "bug_type": "SL SH SF",
    "buggy_lines": "\n                content.writeShort(Integer.valueOf(data[2]));",
    "code": "    protected Object encodeCommand(Command command) {\n\n        ByteBuf content = Unpooled.buffer();\n\n        switch (command.getType()) {\n            case Command.TYPE_POSITION_SINGLE:\n                return encodeContent(command.getDeviceId(), GatorProtocolDecoder.MSG_POSITION_REQUEST, content);\n            case Command.TYPE_ENGINE_STOP:\n                return encodeContent(command.getDeviceId(), GatorProtocolDecoder.MSG_CLOSE_THE_OIL_DUCT, content);\n            case Command.TYPE_ENGINE_RESUME:\n                return encodeContent(command.getDeviceId(), GatorProtocolDecoder.MSG_RESTORES_THE_OIL_DUCT, content);\n            case Command.TYPE_SET_SPEED_LIMIT:\n                content.writeByte(command.getInteger(Command.KEY_DATA));\n                return encodeContent(command.getDeviceId(), GatorProtocolDecoder.MSG_SET_SPEED_LIMIT, content);\n            case Command.TYPE_SET_ODOMETER:\n                content.writeShort(command.getInteger(Command.KEY_DATA));\n                return encodeContent(command.getDeviceId(), GatorProtocolDecoder.MSG_SET_ODOMETER, content);\n            case Command.TYPE_POSITION_PERIODIC:\n                String[] data = command.getString(Command.KEY_FREQUENCY).split(\";\");\n                content.writeShort(Integer.valueOf(data[0]));\n                content.writeShort(Integer.valueOf(data[1]));\n-                content.writeShort(Integer.valueOf(data[2]));\n                return encodeContent(command.getDeviceId(), GatorProtocolDecoder.MSG_POSITION_PERIODIC, content);\n            default:\n                return null;\n        }\n    }",
    "fixed_code": "    protected Object encodeCommand(Command command) {\n\n        ByteBuf content = Unpooled.buffer();\n\n        switch (command.getType()) {\n            case Command.TYPE_POSITION_SINGLE:\n                return encodeContent(command.getDeviceId(), GatorProtocolDecoder.MSG_POSITION_REQUEST, content);\n            case Command.TYPE_ENGINE_STOP:\n                return encodeContent(command.getDeviceId(), GatorProtocolDecoder.MSG_CLOSE_THE_OIL_DUCT, content);\n            case Command.TYPE_ENGINE_RESUME:\n                return encodeContent(command.getDeviceId(), GatorProtocolDecoder.MSG_RESTORES_THE_OIL_DUCT, content);\n            case Command.TYPE_SET_SPEED_LIMIT:\n                content.writeByte(command.getInteger(Command.KEY_DATA));\n                return encodeContent(command.getDeviceId(), GatorProtocolDecoder.MSG_SET_SPEED_LIMIT, content);\n            case Command.TYPE_SET_ODOMETER:\n                content.writeShort(command.getInteger(Command.KEY_DATA));\n                return encodeContent(command.getDeviceId(), GatorProtocolDecoder.MSG_SET_ODOMETER, content);\n            case Command.TYPE_POSITION_PERIODIC:\n                String[] data = command.getString(Command.KEY_FREQUENCY).split(\";\");\n                content.writeShort(Integer.valueOf(data[0]));\n                content.writeShort(Integer.valueOf(data[1]));\n+                content.writeByte(Integer.valueOf(data[2]));\n                return encodeContent(command.getDeviceId(), GatorProtocolDecoder.MSG_POSITION_PERIODIC, content);\n            default:\n                return null;\n        }\n    }",
    "fixed_lines": "\n                content.writeByte(Integer.valueOf(data[2]));",
    "masked_code": "    protected Object encodeCommand(Command command) {\n\n        ByteBuf content = Unpooled.buffer();\n\n        switch (command.getType()) {\n            case Command.TYPE_POSITION_SINGLE:\n                return encodeContent(command.getDeviceId(), GatorProtocolDecoder.MSG_POSITION_REQUEST, content);\n            case Command.TYPE_ENGINE_STOP:\n                return encodeContent(command.getDeviceId(), GatorProtocolDecoder.MSG_CLOSE_THE_OIL_DUCT, content);\n            case Command.TYPE_ENGINE_RESUME:\n                return encodeContent(command.getDeviceId(), GatorProtocolDecoder.MSG_RESTORES_THE_OIL_DUCT, content);\n            case Command.TYPE_SET_SPEED_LIMIT:\n                content.writeByte(command.getInteger(Command.KEY_DATA));\n                return encodeContent(command.getDeviceId(), GatorProtocolDecoder.MSG_SET_SPEED_LIMIT, content);\n            case Command.TYPE_SET_ODOMETER:\n                content.writeShort(command.getInteger(Command.KEY_DATA));\n                return encodeContent(command.getDeviceId(), GatorProtocolDecoder.MSG_SET_ODOMETER, content);\n            case Command.TYPE_POSITION_PERIODIC:\n                String[] data = command.getString(Command.KEY_FREQUENCY).split(\";\");\n                content.writeShort(Integer.valueOf(data[0]));\n                content.writeShort(Integer.valueOf(data[1]));\n>>> [ INFILL ] <<<\n                return encodeContent(command.getDeviceId(), GatorProtocolDecoder.MSG_POSITION_PERIODIC, content);\n            default:\n                return null;\n        }\n    }",
    "project": "traccar-traccar",
    "test_error_message": "    org.opentest4j.AssertionFailedError at GatorProtocolEncoderTest.java:34",
    "test_framework": "gitbugjava",
    "test_line": "",
    "test_name": "testEncodePeriodicPositionRetrievalIntervalSet()",
    "test_suite": "org.traccar.protocol.GatorProtocolEncoderTest",
    "time_buggy": "2023-08-29 16:07:06 +0400",
    "time_fixed": "2023-08-29 16:13:47 +0400"
}